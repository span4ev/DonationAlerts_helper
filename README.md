# DonationAlerts_helper

Этот скрипт предназначен для подсчёта суммы донатов и сортировки донатеров по разным фильтрам.
Скрипт считывает информацию из файла с донатами (предварительно экспортированный) с сайта [Donation Alerts](https://www.donationalerts.com/dashboard). Результат сохраняется в отдельный файл (с именем `donations_result.txt`) в папку проекта.


Для того чтобы получить файл с данными о донатах, перейдите на страницу [Donation Alerts](https://www.donationalerts.com/dashboard/activity-feed/donations) или выберите в боковом меню пункт `Последние сообщения` - `Экспорт`. При экспорте выберите формат `.txt HTML список`.

Поместите скачанный файл `donations.txt` в папку проекта и запустите либо исполняемый файл `DonationAlerts_helper.exe`, либо питоновский скрипт `DonationAlerts_helper.py` (из которого был скомпилирован экзешник).

> При каждом запуске скрипта файл `donations_result.txt` перезаписывается.


### Содержимое папки

- config.txt - Файл конфигурации для выбора других опций
- DonationAlerts_helper.exe - Исполняемый файл скрипта
- donations.py - Скрипт, который вы можете изучить, самостоятельно запустить или скомпилировать их него собственный `.exe` 
- donations.txt - Пример экспортированного файла с сайта DA 
- README.md - Ридми файл


После окончания работы скрипта можно скопировать данные из файла `donations_result.txt` и вставить их, например, в панель твича. 


- По умолчанию все донаты от каждого донатера суммируются - это неизменно.
- По умолчанию происходит сортировка по большей сумме (настраиваемая опция)
- По умолчанию после суммы указан символ рубля (настраиваемая опция)
- По умолчанию включена генерация строки с общей суммой всех донатов (настраиваемая опция)


### Дополнительная информация после суммы доната (по умолчанию указан символ рубля - "₽")

Эта доп. информация указывается в файле `config.txt` в переменной `line_ending`. 
Для того чтобы указать любое другое слово/символ, укажите их после знака равно без кавычек.

Пример:
```
    line_ending = RUB
    line_ending = ₽
    line_ending = руб
    line_ending = р.
    line_ending = что угодно ещё
```
и тому подобное.

Если вы не хотите указывать валюту после суммы доната, просто удалите всё, что следует после знака равно.

Пример:
```
    line_ending = 
```


### Генерация строки с общей суммой всех донатов

Эта строка включается/отключается в файле `config.txt` в переменной `total_sum`. Доступны два варианта:
```sh
    0 - включить
    1 - выключить
```
Для включения/отключения просто укажите соответствующую цифру после знака равно, например:
```sh
    total_sum = 1
```
Результат:
```sh
    НеПалатка - 20 ₽ 
    Это я - 100 ₽ 
    Rosie from America - 60 ₽ 
    Аноним - 40 ₽ 

    Общая сумма - 220 ₽
```


### Сортировка

По умолчанию донаты сортируются по наибольшей сумме. Для изменения метода сортировки измените значение переменной `sorting` в файле `config.txt`, указав соответствующую цифру после знака равно. При указании чего-либо ещё - будет использоваться значение по умолчанию.


```sh
    0 - Сортировка по умолчанию
    1 - Сортировка по умолчанию (инвертированная)
    2 - Сортировка по большей сумме
    3 - Сортировка по меньшей сумме
    4 - Сортировка по алфавиту
```


Пример донатов в порядке поступления:

```sh
    Аноним - 10
    Аноним - 10
    Это я - 100
    Rosie from America - 15
    Rosie from America - 15
    НеПалатка - 20
    Rosie from America - 15
    Аноним - 10
    Rosie from America - 15
    Аноним - 10
 ```
 
Варианты:
 
```sh
0 - Сортировка по умолчанию - в порядке получения доната.
 ```
Результат:
 ```sh
    Аноним - 40  
    Rosie from America - 60  
    Это я - 100  
    НеПалатка - 20
 ```

```sh
1 - Сортировка по умолчанию - в порядке получения доната (то же, что и 0, но инвертированная)
 ```
 
Результат:
```sh
    НеПалатка - 20  
    Это я - 100  
    Rosie from America - 60  
    Аноним - 40  
 ```

```sh
2 - Сортировка по большей сумме
 ```
Результат:
```sh
    Rosie from America - 60  
    Аноним - 40  
    НеПалатка - 20  
    Это я - 100  
 ```
 
```sh
3 - Сортировка по меньшей сумме
 ```
 
Результат:
```sh
    НеПалатка - 20  
    Аноним - 40  
    Rosie from America - 60  
    Это я - 100  
 ```
 
```sh
4 - Сортировка по алфавиту
 ```
 
Результат:
```sh
    Rosie from America - 60  
    Аноним - 40  
    НеПалатка - 20  
    Это я - 100  
 ```